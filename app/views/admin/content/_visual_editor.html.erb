<script type="text/javascript">
  $('quicktags').style.display = 'none';
  $('simple_editor').style.display = 'none';
  $('visual_editor').style.display = 'block';
  $('s').className = '';
  $('f').className = 'active';
  $('text_filter').value = 'none';
  var html = $('article_body_and_extended').value;
  $('simple_editor').innerHTML = '';
  if ($('carousel-wrapper')) {
    $('carousel-wrapper').style.display = 'none';
  }

  // Initialize Quill editor if not already done
  if (typeof window.quillEditor === 'undefined' || !window.quillEditor) {
    setTimeout(function() {
      var editorElement = document.querySelector('#visual_editor [data-rich-editor-target="editor"]');
      if (editorElement && editorElement.quill) {
        editorElement.quill.root.innerHTML = html;
      }
    }, 100);
  }
</script>
<%= ckeditor_textarea('article', 'body_and_extended', {:height => '300', :class => 'large'}) %>